(this["webpackJsonpspacex-cargo-planner"]=this["webpackJsonpspacex-cargo-planner"]||[]).push([[0],{38:function(e,n,a){},44:function(e,n,a){},45:function(e,n,a){},46:function(e,n,a){},47:function(e,n,a){},48:function(e,n,a){},49:function(e,n,a){},50:function(e,n,a){},52:function(e,n,a){},53:function(e,n,a){"use strict";a.r(n);var t=a(0),c=a.n(t),r=a(15),o=a.n(r),s=a(10),i=a(9),l=a(3),u=(a(38),a(1)),m=function(e){var n=e.id,a=e.name;return Object(u.jsx)("div",{className:"company-item",children:Object(u.jsx)(i.b,{to:{pathname:"/company/".concat(n),state:{id:n}},children:a})})},p=(a(44),function(e){var n=e.error;return Object(u.jsx)("div",{className:"error-indicator",children:n?n.message:"Error!"})}),d=a(8),h=c.a.createContext(),j=h.Provider,y=h.Consumer,b=function(){return function(e){return function(n){return Object(u.jsx)(y,{children:function(a){return Object(u.jsx)(e,Object(d.a)(Object(d.a)({},n),{},{companyService:a}))}})}}},f=(a(45),function(){return Object(u.jsx)("p",{children:"loading..."})}),_={fetch_company_req:"FETCH_COMPANY_REQUEST",fetch_company_suc:"FETCH_COMPANY_SUCCESS",fetch_company_fail:"FETCH_COMPANY_FAILURE",get_company_by_id:"GET_COMPANY_BY_ID",filter_company_by_name:"FILTER_COMPANY_BY_NAME",save_company_list:"SAVE_COMPANY_LIST",delete_company:"DELETE_COMPANY",change_company:"CHANGE_COMPANY",add_message:"ADD_MESSAGE"},g=function(){return{type:_.fetch_company_req}},O=function(e){return{type:_.fetch_company_suc,payload:e}},x=function(e){return{type:_.fetch_courses_user_fail,payload:e}},v=function(e){return{type:_.add_message,payload:e}},C=function(e,n){return function(){n(g()),e.getCompaniesFromGitHub().then((function(e){return n(O(e))})).catch((function(e){return n(x(e))}))}},N=a(11),L=(a(46),function(e){var n=e.companies;return Object(u.jsx)("div",{className:"company-list",children:Object(u.jsx)("ul",{className:"company-list__items",children:n.map((function(e){return Object(u.jsx)("li",{className:"company-list__item",children:Object(u.jsx)(m,{id:e.id,name:e.name})},e.id)}))})})}),E=b()(Object(s.b)((function(e){var n=e.companyList;return{companies:n.companies,searchText:n.searchText,loading:n.loading,error:n.error}}),(function(e){return{onRequsted:function(){return e(g())},onLoaded:function(n){return e(O(n))},onError:function(){return e(x())},onMessage:function(n){return e(v(n))}}}))((function(e){var n,a=e.companies,c=e.searchText,r=e.onMessage,o=e.onRequsted,s=e.onLoaded,i=e.onError,l=e.loading,m=e.error,d=Object(N.b)("companyList").getAll;if(Object(t.useEffect)((function(){o(),d().then((function(e){s(e),e.length?r("You are working with a locally saved list of companies."):r("There is no data about the companies in the local repository. Please download them from the internet.")})).catch((function(e){return i(new Error("There is no data about the companies in the local repository. Please download them from the internet."))}))}),[]),a)return a.length,l?Object(u.jsx)(f,{}):m?Object(u.jsx)(p,{error:m}):(n=""!==c&&null!==c?a.filter((function(e){return e.name.toLowerCase().indexOf(c.toLowerCase())>-1})):a,Object(u.jsx)(L,{companies:n}))}))),k=(a(47),b()(Object(s.b)((function(e){var n=e.companyList;return{companies:n.companies,message:n.message}}),(function(e,n){var a=n.companyService;return{onFilterCompany:function(n){return e({type:_.filter_company_by_name,payload:n})},onFethCompanies:C(a,e),onMessage:function(n){return e(v(n))}}}))((function(e){var n=e.companies,a=e.onFilterCompany,t=e.onFethCompanies,c=e.message,r=e.onMessage,o=Object(N.b)("companyList").deleteAll,s=Object(N.b)("companyList").add;return Object(u.jsxs)("div",{className:"header",children:[Object(u.jsx)("div",{className:"header__logo",children:Object(u.jsx)(i.b,{to:"/",children:"Cargo Planner"})}),Object(u.jsx)("div",{className:"header__search",children:Object(u.jsx)("input",{onChange:function(e){return a(e.target.value)},placeholder:"Search"})}),Object(u.jsxs)("div",{className:"header__actions",children:[Object(u.jsx)("button",{onClick:function(){t(),r("You are working with a list of companies downloaded from the internet. To save the changes, click the save button.")},children:"Load"}),Object(u.jsx)("button",{onClick:function(){o().then(console.log).catch(console.error);for(var e=0;e<n.length;e++)s(n[e]).then(console.log).catch(console.error);r("You are working with a locally saved list of companies.")},children:"Save"})]}),Object(u.jsx)("div",{className:"header__message",children:c})]})})))),w=(a(48),function(){return Object(u.jsx)("div",{className:"home-page",children:Object(u.jsx)("h1",{children:"SpaceX Cargo Planner"})})}),T=a(27),P=(a(49),Object(s.b)((function(e){return{currentCompany:e.companyList.currentCompany}}),(function(e){return{getCompanyById:function(n){return e(function(e){return{type:_.get_company_by_id,payload:e}}(n))},onDeleteCompany:function(n){return e(function(e){return{type:_.delete_company,payload:e}}(n))},onChangeCompany:function(n){return e(function(e){return{type:_.change_company,payload:e}}(n))}}}))((function(e){var n,a=e.currentCompany,c=e.getCompanyById,r=e.onDeleteCompany,o=e.onChangeCompany,s=Object(l.g)(),i=Object(l.f)(),m="";n=s.state?s.state.id:s.pathname.split("/")[2],Object(t.useEffect)((function(){c(n)}),[n,a]);var h,j=0;if(a&&a.boxes){for(var y=a.boxes.split(",").map(Number),b=0;b<y.length;b++){if(isNaN(y[b])){m="Data is incorrect!";break}if(y[b]>10){m="Each Starship cargo bay can hold up to 10 units.";break}}for(Object(T.a)(y,{order:"desc"});y.length>0;){var f=parseFloat(y[0]);if(isNaN(f)){j=NaN;break}for(var _=!1,g=1;g<y.length;g++){if(!(f+parseFloat(y[g])<=10)){_=!0,y.splice(0,g);break}f+=parseFloat(y[g])}if(j++,!_&&f<=10)break;if(j>20)break}}return a?(h=a.boxes?Object(u.jsxs)("div",{className:"company-page__result",children:[Object(u.jsxs)("p",{children:["Number of required cargo boys: ",Object(u.jsx)("span",{children:m?"-":j})]}),Object(u.jsxs)("div",{className:"company-page__boxes",children:[Object(u.jsx)("p",{children:"Corgo boxes"}),Object(u.jsx)("input",{value:a.boxes,onChange:function(e){o(Object(d.a)(Object(d.a)({},a),{},{boxes:e.target.value}))},placeholder:"Enter cargo boxes"})]})]}):Object(u.jsx)("div",{className:"company-page__result",children:Object(u.jsx)("p",{children:"There is nothing to shipment!"})}),Object(u.jsxs)("div",{className:"company-page",children:[Object(u.jsx)("h1",{className:"company-page__title",children:a.name}),Object(u.jsx)("div",{className:"company-page__email",children:Object(u.jsx)("a",{href:"mailto:".concat(a.email),children:a.email})}),h,Object(u.jsxs)("div",{className:"company-page__button",children:[Object(u.jsx)("button",{onClick:function(){r(a),i.push("/")},children:"Delete Company"}),m?Object(u.jsx)(p,{error:new Error(m)}):""]})]})):Object(u.jsx)("div",{className:"company-page",children:Object(u.jsx)(p,{error:new Error("Company not found. Choose another company.")})})}))),A=(a(50),function(){return Object(u.jsxs)("div",{className:"app__wrapper",children:[Object(u.jsx)("div",{className:"app__header",children:Object(u.jsx)(k,{})}),Object(u.jsx)("div",{className:"app__company-list",children:Object(u.jsx)(E,{})}),Object(u.jsx)("div",{className:"app__page",children:Object(u.jsxs)(l.c,{children:[Object(u.jsx)(l.a,{path:"/company",component:P}),Object(u.jsx)(l.a,{path:"/",component:w})]})})]})}),S=a(16),F=a(23),M=a(28),Y=a(26),D=function(e){Object(M.a)(a,e);var n=Object(Y.a)(a);function a(){var e;Object(S.a)(this,a);for(var t=arguments.length,c=new Array(t),r=0;r<t;r++)c[r]=arguments[r];return(e=n.call.apply(n,[this].concat(c))).state={hasError:!1},e}return Object(F.a)(a,[{key:"componentDidCatch",value:function(e,n){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?Object(u.jsx)(p,{}):this.props.children}}]),a}(t.Component),I=a(21),q=a.n(I),B=a(24),H=(a(52),a(25)),G=a(13),R=function(e,n){if(void 0===e)return{companies:[],currentCompany:null,searchText:"",loading:!0,error:null,message:"You are working with a locally saved list of companies."};switch(n.type){case _.fetch_courses_user_req:return{companies:[],currentCompany:null,searchText:"",loading:!0,error:null,message:e.companyList.message};case _.fetch_company_suc:return{companies:n.payload,currentCompany:null,searchText:"",loading:!1,error:null,message:e.companyList.message};case _.fetch_courses_user_fail:return{companies:[],currentCompany:null,searchText:"",loading:!1,error:n.payload,message:e.companyList.message};case _.add_message:return{companies:e.companyList.companies,currentCompany:e.companyList.currentCompany,searchText:"",loading:!1,error:null,message:n.payload};case _.delete_company:var a=e.companyList.companies,t=a.findIndex((function(e){return e.id===n.payload.id}));return{companies:[].concat(Object(G.a)(a.slice(0,t)),Object(G.a)(a.slice(t+1))),currentCompany:null,searchText:"",loading:!1,error:null,message:e.companyList.message};case _.change_company:var c=e.companyList.companies,r=c.findIndex((function(e){return e.id===n.payload.id}));return{companies:[].concat(Object(G.a)(c.slice(0,r)),[n.payload],Object(G.a)(c.slice(r+1))),currentCompany:n.payload,searchText:"",loading:!1,error:null,message:e.companyList.message};case _.get_company_by_id:var o=Object(G.a)(e.companyList.companies),s=o.filter((function(e){return e.id===n.payload}));return{companies:o,currentCompany:s?s[0]:null,searchText:e.companyList.searchText,loading:!1,error:null,message:e.companyList.message};case _.filter_company_by_name:return{companies:e.companyList.companies,currentCompany:e.companyList.currentCompany,searchText:n.payload,loading:!1,error:null,message:e.companyList.message};default:return e.companyList}},U=function(e,n){return{companyList:R(e,n)}},J=Object(H.a)(U),Q=new function e(){Object(S.a)(this,e),this.getCompaniesFromGitHub=Object(B.a)(q.a.mark((function e(){var n;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://raw.githubusercontent.com/sashakever/spacex-cargo-planner/main/src/services/shipments.json");case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch data!");case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))};o.a.render(Object(u.jsx)(s.a,{store:J,children:Object(u.jsx)(D,{children:Object(u.jsx)(j,{value:Q,children:Object(u.jsx)(i.a,{children:Object(u.jsx)(N.a,{config:{databaseName:"Company-DB",version:1,stores:[{name:"companyList",id:{keyPath:"id",autoIncrement:!0},indices:[{name:"id",keyPath:"id",options:{unique:!1}},{name:"name",keyPath:"name"},{name:"email",keyPath:"email"},{name:"boxes",keyPath:"boxes"}]}]},children:Object(u.jsx)(A,{})})})})})}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.4e14699f.chunk.js.map