(this["webpackJsonpspacex-cargo-planner"]=this["webpackJsonpspacex-cargo-planner"]||[]).push([[0],{38:function(e,n,a){},44:function(e,n,a){},45:function(e,n,a){},46:function(e,n,a){},47:function(e,n,a){},48:function(e,n,a){},49:function(e,n,a){},50:function(e,n,a){},52:function(e,n,a){},53:function(e,n,a){"use strict";a.r(n);var t=a(0),r=a.n(t),c=a(15),o=a.n(c),s=a(10),i=a(9),l=a(3),p=(a(38),a(1)),u=function(e){var n=e.id,a=e.name;return Object(p.jsx)("div",{className:"company-item",children:Object(p.jsx)(i.b,{to:{pathname:"/spacex-cargo-planner/company/".concat(n),state:{id:n}},children:a})})},m=(a(44),function(e){var n=e.error;return Object(p.jsx)("div",{className:"error-indicator",children:n?n.message:"Error!"})}),d=a(8),h=r.a.createContext(),j=h.Provider,y=h.Consumer,b=function(){return function(e){return function(n){return Object(p.jsx)(y,{children:function(a){return Object(p.jsx)(e,Object(d.a)(Object(d.a)({},n),{},{companyService:a}))}})}}},f=(a(45),function(){return Object(p.jsx)("p",{children:"loading..."})}),g={fetch_company_req:"FETCH_COMPANY_REQUEST",fetch_company_suc:"FETCH_COMPANY_SUCCESS",fetch_company_fail:"FETCH_COMPANY_FAILURE",get_company_by_id:"GET_COMPANY_BY_ID",filter_company_by_name:"FILTER_COMPANY_BY_NAME",save_company_list:"SAVE_COMPANY_LIST",delete_company:"DELETE_COMPANY",change_company:"CHANGE_COMPANY",add_message:"ADD_MESSAGE"},_=function(){return{type:g.fetch_company_req}},x=function(e){return{type:g.fetch_company_suc,payload:e}},O=function(e){return{type:g.fetch_courses_user_fail,payload:e}},v=function(e){return{type:g.add_message,payload:e}},C=function(e,n){return function(){n(_()),e.getCompaniesFromGitHub().then((function(e){return n(x(e))})).catch((function(e){return n(O(e))}))}},N=a(11),L=(a(46),function(e){var n=e.companies;return Object(p.jsx)("div",{className:"company-list",children:Object(p.jsx)("ul",{className:"company-list__items",children:n.map((function(e){return Object(p.jsx)("li",{className:"company-list__item",children:Object(p.jsx)(u,{id:e.id,name:e.name})},e.id)}))})})}),E=b()(Object(s.b)((function(e){var n=e.companyList;return{companies:n.companies,searchText:n.searchText,loading:n.loading,error:n.error}}),(function(e){return{onRequsted:function(){return e(_())},onLoaded:function(n){return e(x(n))},onError:function(){return e(O())},onMessage:function(n){return e(v(n))}}}))((function(e){var n,a=e.companies,r=e.searchText,c=e.onMessage,o=e.onRequsted,s=e.onLoaded,i=e.onError,l=e.loading,u=e.error,d=Object(N.b)("companyList").getAll;if(Object(t.useEffect)((function(){o(),d().then((function(e){s(e),e.length?c("You are working with a locally saved list of companies."):c("There is no data about the companies in the local repository. Please download them from the internet.")})).catch((function(e){return i(new Error("There is no data about the companies in the local repository. Please download them from the internet."))}))}),[]),a)return a.length,l?Object(p.jsx)(f,{}):u?Object(p.jsx)(m,{error:u}):(n=""!==r&&null!==r?a.filter((function(e){return e.name.toLowerCase().indexOf(r.toLowerCase())>-1})):a,Object(p.jsx)(L,{companies:n}))}))),w=(a(47),b()(Object(s.b)((function(e){var n=e.companyList;return{companies:n.companies,message:n.message}}),(function(e,n){var a=n.companyService;return{onFilterCompany:function(n){return e({type:g.filter_company_by_name,payload:n})},onFethCompanies:C(a,e),onMessage:function(n){return e(v(n))}}}))((function(e){var n=e.companies,a=e.onFilterCompany,t=e.onFethCompanies,r=e.message,c=e.onMessage,o=Object(N.b)("companyList").deleteAll,s=Object(N.b)("companyList").add;return Object(p.jsxs)("div",{className:"header",children:[Object(p.jsx)("div",{className:"header__logo",children:Object(p.jsx)(i.b,{to:"/",children:"Cargo Planner"})}),Object(p.jsx)("div",{className:"header__search",children:Object(p.jsx)("input",{onChange:function(e){return a(e.target.value)},placeholder:"Search"})}),Object(p.jsxs)("div",{className:"header__actions",children:[Object(p.jsx)("button",{onClick:function(){t(),c("You are working with a list of companies downloaded from the internet. To save the changes, click the save button.")},children:"Load"}),Object(p.jsx)("button",{onClick:function(){o().then().catch(console.error);for(var e=0;e<n.length;e++)s(n[e]).then().catch(console.error);c("You are working with a locally saved list of companies."),window.alert("List saved")},children:"Save"})]}),Object(p.jsx)("div",{className:"header__message",children:r})]})})))),k=(a(48),function(){return Object(p.jsx)("div",{className:"home-page",children:Object(p.jsx)("h1",{children:"SpaceX Cargo Planner"})})}),T=a(27),P=(a(49),Object(s.b)((function(e){return{currentCompany:e.companyList.currentCompany}}),(function(e){return{getCompanyById:function(n){return e(function(e){return{type:g.get_company_by_id,payload:e}}(n))},onDeleteCompany:function(n){return e(function(e){return{type:g.delete_company,payload:e}}(n))},onChangeCompany:function(n){return e(function(e){return{type:g.change_company,payload:e}}(n))}}}))((function(e){var n,a=e.currentCompany,r=e.getCompanyById,c=e.onDeleteCompany,o=e.onChangeCompany,s=Object(l.g)(),i=Object(l.f)(),u="";n=s.state?s.state.id:s.pathname.split("/")[2],Object(t.useEffect)((function(){r(n)}),[n,a]);var h,j=0;if(a&&a.boxes){for(var y=a.boxes.split(",").map(Number),b=0;b<y.length;b++){if(isNaN(y[b])){u="Data is incorrect!";break}if(y[b]>10){u="Each Starship cargo bay can hold up to 10 units.";break}}for(Object(T.a)(y,{order:"desc"});y.length>0;){var f=parseFloat(y[0]);if(isNaN(f)){j=NaN;break}for(var g=!1,_=1;_<y.length;_++){if(!(f+parseFloat(y[_])<=10)){g=!0,y.splice(0,_);break}f+=parseFloat(y[_])}if(j++,!g&&f<=10)break;if(j>20)break}}return a?(h=a.boxes?Object(p.jsxs)("div",{className:"company-page__result",children:[Object(p.jsxs)("p",{children:["Number of required cargo boys: ",Object(p.jsx)("span",{children:u?"-":j})]}),Object(p.jsxs)("div",{className:"company-page__boxes",children:[Object(p.jsx)("p",{children:"Corgo boxes"}),Object(p.jsx)("input",{value:a.boxes,onChange:function(e){o(Object(d.a)(Object(d.a)({},a),{},{boxes:e.target.value}))},placeholder:"Enter cargo boxes"})]})]}):Object(p.jsx)("div",{className:"company-page__result",children:Object(p.jsx)("p",{children:"There is nothing to shipment!"})}),Object(p.jsxs)("div",{className:"company-page",children:[Object(p.jsx)("h1",{className:"company-page__title",children:a.name}),Object(p.jsx)("div",{className:"company-page__email",children:Object(p.jsx)("a",{href:"mailto:".concat(a.email),children:a.email})}),h,Object(p.jsxs)("div",{className:"company-page__button",children:[Object(p.jsx)("button",{onClick:function(){c(a),i.push("/spacex-cargo-planner/")},children:"Delete Company"}),u?Object(p.jsx)(m,{error:new Error(u)}):""]})]})):Object(p.jsx)("div",{className:"company-page",children:Object(p.jsx)(m,{error:new Error("Company not found. Choose another company.")})})}))),A=(a(50),function(){return Object(p.jsxs)("div",{className:"app__wrapper",children:[Object(p.jsx)("div",{className:"app__header",children:Object(p.jsx)(w,{})}),Object(p.jsx)("div",{className:"app__company-list",children:Object(p.jsx)(E,{})}),Object(p.jsx)("div",{className:"app__page",children:Object(p.jsxs)(l.c,{children:[Object(p.jsx)(l.a,{path:"/spacex-cargo-planner/company",component:P}),Object(p.jsx)(l.a,{path:"/spacex-cargo-planner",component:k})]})})]})}),S=a(16),F=a(23),M=a(28),Y=a(26),D=function(e){Object(M.a)(a,e);var n=Object(Y.a)(a);function a(){var e;Object(S.a)(this,a);for(var t=arguments.length,r=new Array(t),c=0;c<t;c++)r[c]=arguments[c];return(e=n.call.apply(n,[this].concat(r))).state={hasError:!1},e}return Object(F.a)(a,[{key:"componentDidCatch",value:function(e,n){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?Object(p.jsx)(m,{}):this.props.children}}]),a}(t.Component),I=a(21),q=a.n(I),B=a(24),H=(a(52),a(25)),G=a(13),R=function(e,n){if(void 0===e)return{companies:[],currentCompany:null,searchText:"",loading:!0,error:null,message:"You are working with a locally saved list of companies."};switch(n.type){case g.fetch_courses_user_req:return{companies:[],currentCompany:null,searchText:"",loading:!0,error:null,message:e.companyList.message};case g.fetch_company_suc:return{companies:n.payload,currentCompany:null,searchText:"",loading:!1,error:null,message:e.companyList.message};case g.fetch_courses_user_fail:return{companies:[],currentCompany:null,searchText:"",loading:!1,error:n.payload,message:e.companyList.message};case g.add_message:return{companies:e.companyList.companies,currentCompany:e.companyList.currentCompany,searchText:"",loading:!1,error:null,message:n.payload};case g.delete_company:var a=e.companyList.companies,t=a.findIndex((function(e){return e.id===n.payload.id}));return{companies:[].concat(Object(G.a)(a.slice(0,t)),Object(G.a)(a.slice(t+1))),currentCompany:null,searchText:"",loading:!1,error:null,message:e.companyList.message};case g.change_company:var r=e.companyList.companies,c=r.findIndex((function(e){return e.id===n.payload.id}));return{companies:[].concat(Object(G.a)(r.slice(0,c)),[n.payload],Object(G.a)(r.slice(c+1))),currentCompany:n.payload,searchText:"",loading:!1,error:null,message:e.companyList.message};case g.get_company_by_id:var o=Object(G.a)(e.companyList.companies),s=o.filter((function(e){return e.id===n.payload}));return{companies:o,currentCompany:s?s[0]:null,searchText:e.companyList.searchText,loading:!1,error:null,message:e.companyList.message};case g.filter_company_by_name:return{companies:e.companyList.companies,currentCompany:e.companyList.currentCompany,searchText:n.payload,loading:!1,error:null,message:e.companyList.message};default:return e.companyList}},U=function(e,n){return{companyList:R(e,n)}},J=Object(H.a)(U),Q=new function e(){Object(S.a)(this,e),this.getCompaniesFromGitHub=Object(B.a)(q.a.mark((function e(){var n;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://raw.githubusercontent.com/sashakever/spacex-cargo-planner/main/src/services/shipments.json");case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch data!");case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))};o.a.render(Object(p.jsx)(s.a,{store:J,children:Object(p.jsx)(D,{children:Object(p.jsx)(j,{value:Q,children:Object(p.jsx)(i.a,{children:Object(p.jsx)(N.a,{config:{databaseName:"Company-DB",version:1,stores:[{name:"companyList",id:{keyPath:"id",autoIncrement:!0},indices:[{name:"id",keyPath:"id",options:{unique:!1}},{name:"name",keyPath:"name"},{name:"email",keyPath:"email"},{name:"boxes",keyPath:"boxes"}]}]},children:Object(p.jsx)(A,{})})})})})}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.5d569cce.chunk.js.map